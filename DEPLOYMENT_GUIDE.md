# ğŸš€ AutoGitGrow Deployment Guide

Complete CI/CD pipeline and multi-platform deployment setup for your Docker-ready application.

## ğŸ“‹ Quick Start

### 1. Choose Your Platform
```bash
# Deploy to Render (recommended for beginners)
./deploy/deploy.sh render production

# Deploy to Railway (great for developers)
./deploy/deploy.sh railway production

# Deploy to DigitalOcean (enterprise-grade)
./deploy/deploy.sh digitalocean production

# Push to Docker Hub (for custom deployments)
./deploy/deploy.sh docker-hub production
```

### 2. Automated CI/CD
Your GitHub Actions pipeline automatically:
- âœ… Runs tests on every push
- âœ… Builds multi-platform Docker images
- âœ… Pushes to Docker Hub and GitHub Container Registry
- âœ… Deploys to your chosen platform
- âœ… Runs security scans

## ğŸ† Platform Comparison

| Feature | Render | Railway | DigitalOcean | Docker Hub |
|---------|--------|---------|--------------|------------|
| **Free Tier** | âœ… 750hrs/month | âœ… $5 credit | âŒ Paid only | âœ… Free images |
| **Ease of Setup** | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­ | â­â­ |
| **Auto-Deploy** | âœ… Git-based | âœ… Git-based | âœ… Git-based | âŒ Manual |
| **Database** | âœ… PostgreSQL | âœ… PostgreSQL | âœ… Managed DB | âŒ External |
| **Custom Domains** | âœ… Free SSL | âœ… Free SSL | âœ… Free SSL | âŒ N/A |
| **Scaling** | â­â­â­ | â­â­â­â­ | â­â­â­â­â­ | â­â­ |
| **Price (Est.)** | $7-15/month | $5-20/month | $12-30/month | Free + hosting |

### ğŸ¯ Recommended Choice by Use Case

- **ğŸš€ Quick Launch**: **Render** - Perfect for MVP and demos
- **ğŸ‘¨â€ğŸ’» Development**: **Railway** - Best developer experience
- **ğŸ¢ Production**: **DigitalOcean** - Enterprise features and scaling
- **ğŸ”§ Custom Setup**: **Docker Hub** - Maximum flexibility

## ğŸ“± Platform-Specific Setup

### ğŸ¨ Render.com (Recommended for Beginners)

**Pros**: Simple setup, automatic SSL, great free tier
**Cons**: Limited scaling options

```bash
# 1. Setup
git push origin main  # Push your code
# 2. Visit https://dashboard.render.com
# 3. Connect your GitHub repository
# 4. Render will auto-detect render.yaml and deploy

# Environment Variables to Set:
PAT_TOKEN=your-github-token
BOT_USER=your-github-username
GEMINI_API_KEY=your-gemini-key (optional)
```

**Live in 2 minutes!** âš¡

### ğŸš„ Railway.app (Best Developer Experience)

**Pros**: Excellent DX, instant deployments, great CLI
**Cons**: Can get expensive quickly

```bash
# 1. Install CLI
npm install -g @railway/cli

# 2. Login and deploy
railway login
railway up

# 3. Connect database
railway add postgresql
```

**Features**: One-click PostgreSQL, automatic HTTPS, built-in monitoring

### ğŸŒŠ DigitalOcean App Platform (Production-Ready)

**Pros**: Enterprise features, excellent performance, predictable pricing
**Cons**: No free tier, more complex setup

```bash
# 1. Install CLI
# Download from: https://docs.digitalocean.com/reference/doctl/how-to/install/

# 2. Authenticate
doctl auth init

# 3. Deploy
doctl apps create .do/app.yaml

# 4. Monitor
doctl apps list
```

**Features**: Auto-scaling, load balancing, managed databases, CDN

### ğŸ³ Docker Hub + Custom Hosting

**Pros**: Maximum flexibility, works anywhere
**Cons**: Requires infrastructure management

```bash
# 1. Build and push
./deploy/deploy.sh docker-hub production

# 2. Deploy anywhere
docker run -d \
  -p 80:80 \
  --env-file .env \
  your-username/autogitgrow-frontend:latest
```

## ğŸ”§ CI/CD Pipeline Features

### GitHub Actions Workflow
- **Testing**: Automated tests with PostgreSQL
- **Multi-platform builds**: AMD64 + ARM64 support
- **Security scanning**: Trivy vulnerability detection
- **Multi-registry**: Docker Hub + GitHub Container Registry
- **Auto-deployment**: Triggered on main branch pushes

### Secrets Setup (Required)
Add these to your GitHub repository secrets:

```bash
# GitHub â†’ Settings â†’ Secrets and variables â†’ Actions

DOCKER_HUB_USERNAME=your-username
DOCKER_HUB_TOKEN=your-access-token
RENDER_API_KEY=your-render-key
RAILWAY_TOKEN=your-railway-token
DIGITALOCEAN_ACCESS_TOKEN=your-do-token
```

## ğŸŒ Environment Configuration

### Production Environment Variables

#### Required:
```bash
PAT_TOKEN=ghp_xxxxxxxxxxxx          # GitHub Personal Access Token
BOT_USER=your-github-username       # Your GitHub username
DATABASE_URL=postgresql://...        # Auto-generated by platform
```

#### Optional:
```bash
GEMINI_API_KEY=AIzaxxxxxxx          # For AI insights feature
VITE_REPO_OWNER=your-username       # Repository owner
VITE_REPO_NAME=autogitgrow          # Repository name
```

### Getting GitHub Token (PAT_TOKEN)
1. Go to GitHub Settings â†’ Developer settings â†’ Personal access tokens
2. Generate new token (classic)
3. Select scopes: `repo`, `user`, `read:org`
4. Copy the token and add to your platform's environment variables

## ğŸ§ª Testing Before Deployment

```bash
# Local testing
docker compose up --build

# Run test suite
docker compose -f docker-compose.test.yml up --build --abort-on-container-exit

# Check health
curl http://localhost:80        # Frontend
curl http://localhost:8000/api/stats  # Backend API
```

## ğŸš¨ Troubleshooting

### Common Issues:

#### 1. Database Connection Failed
```bash
# Check DATABASE_URL format
postgresql://user:password@host:port/database

# Verify database is running
docker compose logs db
```

#### 2. Frontend Can't Reach Backend
```bash
# Check VITE_API_URL points to correct backend
# For Render: https://your-backend.onrender.com
# For Railway: https://your-service.railway.app
```

#### 3. Import Errors (Fixed in setup)
```bash
# We've already fixed these common Python import issues:
# âŒ from .models import Base
# âœ… from models import Base
```

#### 4. Build Context Too Large
```bash
# We've added comprehensive .dockerignore
# Build context reduced from 399MB â†’ 3.7KB
```

## ğŸ“Š Monitoring Your Deployment

### Health Checks
All platforms provide built-in monitoring:

- **Render**: Dashboard shows logs, metrics, deployments
- **Railway**: Real-time logs and performance metrics  
- **DigitalOcean**: App insights, scaling metrics, alerts

### Custom Monitoring
Your app includes health endpoints:
```bash
GET /health           # Backend health check
GET /api/stats        # Application statistics
```

## ğŸ”„ Updates and Rollbacks

### Automatic Updates
Push to main branch â†’ Automatic deployment

### Manual Rollback
```bash
# Render: Use dashboard or API
curl -X POST "https://api.render.com/deploy/srv-$SERVICE_ID" \
  -H "Authorization: Bearer $API_KEY" \
  -d '{"ref": "previous-commit-sha"}'

# Railway: Use CLI
railway rollback

# DigitalOcean: Use CLI
doctl apps create-deployment $APP_ID --force-rebuild
```

## ğŸ¯ Next Steps

1. **Choose your platform** from the comparison above
2. **Set up secrets** following the platform-specific guide
3. **Deploy** using the automated scripts
4. **Monitor** your application using platform dashboards
5. **Scale** as your user base grows

Your AutoGitGrow application is now production-ready with enterprise-grade CI/CD! ğŸš€

## ğŸ¤ Need Help?

- Check platform documentation
- Review GitHub Actions logs
- Test locally with Docker first
- Verify all environment variables are set

Happy deploying! ğŸ‰